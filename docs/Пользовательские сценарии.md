# Пользовательские сценарии

## API Gateway

- Взаимодействует с сервисом управления пользователями.
- Разграничение доступа к эндпоинтам по ролям пользователей на администратора и обычного пользователя.
- Предоставляет прокси методы для UI сервисов генерации отчетов и управлениями конфигурациями.

## Сервис управления пользователями:

Планируется использование ``Keycloak`` в качестве сервера авторизации пользователей.

### Аутентификация пользователя:

- Пользователь вводит свои учетные данные на странице входа.
- Сервис проверяет правильность введенных данных и выдает токен доступа.
- Пользователь получает доступ к системе.

### Регистрация нового пользователя

- Пользователь заполняет форму регистрации на UI.
- Сервис проверяет уникальность введенной информации и создает учетную запись пользователя.
- Пользователь получает подтверждение о успешной регистрации.

## Сервис генерации отчетных форм

### Генерация отчетной формы:

- Сервис получает данные от сервиса генерации данных.
- Сервис получает данные о конфигурациях будущего отчета.
- Отчет форматируется в соответствии с шаблонами и требованиями клиента.
- Отформатированный отчет передается сервису сохранения.

## Сервис хранения отчетных форм

### Сохранение отчетной формы:

- Сервис получает отчетную форму от сервиса генерации отчетных форм.
- Отчет сохраняется в базе данных.
- Пользователь может получить доступ к сохраненному отчету.

## Сервис доставки отчетов:

### Доставка отчета по выбранным критериям (UI, электронной почте и тд):

- Пользователь выбирает способ доставки отчета.
- Сервис получает отчет в сервисе сохранения и отправляет отчет.
- Пользователь получает отчет.

## Сервис управления конфигурациями:

### Предоставление конфигураций для будущего отчета

- Пользователь получает на UI список доступных отчетов и конфигураций к ним.

### Заведение отчетов в системе (для админов):

- Администратор системы вносит информацию о новом отчете.
- Сервис сохраняет информацию с конфигурацией отчета.
- Пользователь запрашивает конфигурацию отчета перед генерацией и форматированием данных.

### Редактирование информации об отчете в системе (для админов):

- Администратор системы вносит изменения в конфигурации существующего отчета.
- Сервис сохраняет обновленную информацию с конфигурацией.

### Удаление отчетов (для админов):

- Администратор системы удаляет существующий отчет.
- Сервис удаляет информацию об отчете из системы.

### Обновление конфигурации форматирования отчетов (для админов):

- Администратор системы вносит изменения в конфигурацию форматирования отчетов.
- Сервис получает обновленные параметры и применяет их к следующим отчетам.
- Отчеты генерируются и форматируются с использованием обновленных настроек.
